<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>RESTful SERVER</title>
    <style>
        a {
            color: blue;
            text-decoration: none;
        }
        .link{
            color: red;
        }
    </style>
    <script>
        window.onload = () => {

            function getlist(data){
                const xhr = new XMLHttpRequest();
                xhr.open('post','/');
                xhr.setRequestHeader('Content-Type', 'application/json' );
                xhr.send(data);
                xhr.addEventListener('load',()=>{
                    const { mkdir , result } = JSON.parse(xhr.responseText)
                    if(mkdir){
                        document.querySelector('.result').textContent=result    
                    }else{
                        const listBox =  document.querySelector('.category');
                        listBox.innerHTML = '';
                        for( let i = 0 ; i < result.length -1 ; i++ ){
                            if( i % 2 === 0){
                            let li = document.createElement('li');
                            listBox.append(li);
                                li.innerHTML = `<a class="link" href="${result[i]}">${result[i+1]}</a>`;
                            }
                        }
                    }
                    forms.elements[0].value = '';
                    forms.elements[1].value = '';
                });
            }

            getlist('');
            
            const forms =document.querySelector('form'); 
            forms.elements[2].addEventListener('click',(e)=>{
                const data = {
                    title:forms.elements[0].value,
                    description:forms.elements[1].value
                }
                const dataString = JSON.stringify(data);
                e.preventDefault();
                getlist(dataString);
            });
        }

    </script>
</head>

<body>
    <nav>
        <h2>Router Tutorial</h2>
        <ul>
            <li>
                <a href="/main">Main</a>
            </li>
            <li>
                <a href="/join">Join</a>
            </li>
            <li>
                <a href="/sign">sign</a>
            </li>
            <li>
                <a href="/update">update</a>
            </li>
            <li>
                <a href="/react">React공부</a>
            </li>
        </ul>
        <h2>생성하신 카테고리</h2>
        <ul class="category" >
        </ul>
    </nav>
    <h2>카테고리및 해당 폴더 생성 만들기 </h2>
    <div>
        <form>
            <p>
                폴더명 : <input type="text" id="username" name="title" placeholder="폴더명">
            </p>
            <P>   
                카테고리 명 : <input type="text" name="description" placeholder="간단한 내용을 적어주세요"/>
            </P>
            <button type="submit">등록</button>
        </form>
        <div class="result" style="color: red;font-weight: 900; font-size: 20px; " > </div>
    </div>
    <ul>
        <h2>구현하고 싶은것들</h2>
        <li>
            ul li 추가 기능 추가 캐싱 
        </li>
        <li>
            Button 클릭시 cookie 지우기
        </li>
        <li>
            배운거 정리할 수 있게끔 textarea 에 적으면 자동으로 HTML 문서 작성 되게끔 구현 해보기
        </li>
        <li>
            <h2>배운거 정리 항목</h2>
            <h2>인지: 파일 >> 보안 문제를 해결 하기 위해서 DataBase </h2>
            <ul>
                <li>
                    <h3>javaScript</h3>
                    <ol>
                        <li> es6 문법</li>
                        <li> 실행 컨텍스트 </li>
                        <li> 등등 </li>
                    </ol>
                </li>
                <li>
                    <h3>Node.js</h3>
                    <ol>
                        <li>
                            Node.js 모듈
                        </li>
                        <li>
                            Node.js 미들웨어 개념
                        </li>
                        <li>
                            passport 개념
                        </li>
                        <li>
                            Routing , view=engine 정리
                        </li>
                        <li>
                            cookie session cache 입력
                        </li>
                    </ol>   
                </li>
                <li>
                    <h3>MySQL </h3>
                    <ol>
                        <li>DB 구조 이해 </li>
                        <li>
                            SELECT query
                        </li>
                        <li>
                            INSERT query
                        </li>
                        <li>
                            UPDATA query
                        </li>
                        <li>
                            DELETE query
                        </li>
                        <li>
                            ERD  기초 정리 
                        </li>
                    </ol>
                </li>
                <li>
                <h3>Internet 상식</h3>
                    <ol>
                        <li>HTTP/HTTPS</li>
                        <li>URI/URL/URN</li>
                        <li></li>
                    </ol>
                </li>
                <li>
                   <h3>Java</h3> 
                </li>
                <li>
                    <h3>React</h3>
                </li>
            </ul>
        </li>        
    </ul>
</body>

</html>